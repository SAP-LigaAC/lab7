sap.ui.define(["flight/bookings/ui/controller/BaseController","sap/ui/model/json/JSONModel"],function(t,e){"use strict";return t.extend("flight.bookings.ui.controller.Book",{onInit:function(){this.oNewBookingModel=new e;this.getView().setModel(this.oNewBookingModel,"newBookingModel");this.getRouter().getRoute("book").attachPatternMatched(this.onPatternMatched,this)},onPatternMatched:function(){this.oNewBookingModel.setJSON(`{\n                "booking" : {\n                    "id": null,\n                    "firstName": null,\n                    "lastName": null,\n                    "emailAddress": null,\n                    "phoneNumber": null,\n                    "flightDate": null,\n                    "flightDestination": null\n                }\n            }`);const t=new Date;const e=new Date;e.setDate(t.getDate()+1);this.oNewBookingModel.setProperty("/minFlightDate",e)},onPressBook:function(t){const e=this.byId("idBookPage");e.setBusy(true);const o=this.oNewBookingModel.getData().booking;o.flightDate=new Date(o.flightDate).toISOString();this.post(`/core/api/booking`,o).then(t=>{this.getRouter().navTo("booking",{bookingId:o.id})}).catch(t=>{const e=this.getI18nMessage("generic.error.message");this.MessageBox.error(e)}).finally(()=>{e.setBusy(false)})}})});